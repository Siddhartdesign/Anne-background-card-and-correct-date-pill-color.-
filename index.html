<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Anneâ€™s diary</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- EB Garamond Header Font -->
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@700&display=swap" rel="stylesheet">

<style>
:root {
  --page-bg: #D2C6BB;
  --header-bg: #DBD1C7;
  --main-card-bg: #E3D7CB;
  --entry-bg: #D5CABE;

  --day-empty-bg: #DBD1C7;
  --day-highlight: #DBACAA;

  --dot: #B68312;
  --month-pill: #E8DDD1;

  --header-ink: #23190F;
  --body-ink: #241A10;

  --max-width: 1100px;
}

/* GLOBAL */
body {
  margin: 0;
  background: var(--page-bg);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--body-ink);
}

.app {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 20px;
}

/* HEADER BAR */
.header-bar {
  background: var(--header-bg);
  padding: 18px 22px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 20px;
}

.header-bar img {
  width: 70px;
  height: 70px;
  border-radius: 8px;
  object-fit: cover;
  filter: sepia(0.35) contrast(1.05);
}

.header-title {
  font-family: 'EB Garamond', serif;
  font-size: 2.4rem;
  font-weight: 700;
  color: var(--header-ink);
}

/* MONTH SELECTOR */
.month-selector {
  background: var(--month-pill);
  border-radius: 999px;
  padding: 12px 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 18px;
  font-weight: 600;
  margin: 0 auto 20px auto;
  color: var(--body-ink);
}

.month-selector button {
  background: none;
  border: none;
  font-size: 1.4rem;
  opacity: 0.6;
  cursor: pointer;
}

/* MAIN CARD */
.main-card {
  background: var(--main-card-bg);
  border-radius: 16px;
  padding: 20px;
}

/* LAYOUT */
.layout {
  display: flex;
  gap: 22px;
}

/* ENTRY PANEL */
.entry-panel {
  width: 300px;
  background: var(--entry-bg);
  padding: 16px;
  border-radius: 12px;
}

.entry-panel h2 {
  margin-top: 0;
  font-family: 'EB Garamond', serif;
  font-size: 1.4rem;
}

.entry-content {
  line-height: 1.45;
  margin-top: 10px;
}

/* CALENDAR */
.calendar {
  flex: 1;
}

.weekday-row {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  font-weight: 600;
  text-align: center;
  margin-bottom: 10px;
  opacity: 0.75;
}

.grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 12px;
}

.day {
  background: var(--day-empty-bg);
  padding: 18px;
  min-height: 82px;
  border-radius: 12px;
  text-align: center;
  font-size: 1.15rem;
  position: relative;
  border: 1px solid rgba(0,0,0,0.05);
}

.day.has-entry {
  background: var(--day-highlight);
}

.milestone-dot {
  width: 10px;
  height: 10px;
  background: var(--dot);
  border-radius: 50%;
  position: absolute;
  top: 6px;
  right: 6px;
}

/* -------------------------------------- */
/* ðŸ“± MOBILE RESPONSIVE  */
/* -------------------------------------- */

@media (max-width: 900px) {

  .app { padding: 12px; }

  .header-bar {
    padding: 14px;
    gap: 12px;
  }

  .header-bar img {
    width: 56px;
    height: 56px;
  }

  .header-title {
    font-size: 1.85rem;
  }

  .month-selector {
    width: 100%;
    font-size: 1rem;
    padding: 10px 14px;
  }

  .layout {
    flex-direction: column;
    gap: 14px;
  }

  .entry-panel {
    width: 100%;
    padding: 12px;
  }

  .entry-panel h2 {
    font-size: 1.2rem;
    margin-bottom: 8px;
  }

  .entry-content {
    font-size: 0.96rem;
    line-height: 1.36;
  }

  .entry-content > div,
  .entry-content p {
    margin: 6px 0;
  }

  .weekday-row {
    margin-bottom: 6px;
    font-size: 0.82rem;
  }

  .grid {
    gap: 10px;
  }

  .day {
    padding: 12px;
    min-height: 60px;
    font-size: 1rem;
  }

  .milestone-dot {
    width: 8px;
    height: 8px;
    top: 7px;
    right: 7px;
  }
}
</style>
</head>

<body>

<div class="app">

  <!-- HEADER -->
  <div class="header-bar">
    <img src="anne.jpg" alt="Anne Frank">
    <div class="header-title">Anneâ€™s diary</div>
  </div>

  <!-- MONTH SELECTOR -->
  <div class="month-selector">
    <button id="prevMonth">â€¹</button>
    <span id="monthLabel">June 1942</span>
    <button id="nextMonth">â€º</button>
  </div>

  <!-- MAIN CARD -->
  <div class="main-card">

    <div class="layout">

      <!-- LEFT PANEL -->
      <aside class="entry-panel">
        <h2>Entries</h2>
        <div id="entryContent">Select a day</div>
      </aside>

      <!-- CALENDAR -->
      <main class="calendar">
        <div class="weekday-row">
          <div>Sun</div><div>Mon</div><div>Tue</div>
          <div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>

        <div id="calendarGrid" class="grid"></div>
      </main>

    </div>

  </div>
</div>

<script>
// LOAD JSON
let ALL_ENTRIES = [];

fetch("Anne_Frank_Diary.json")
  .then(r => r.json())
  .then(j => {
    const raw = j.chronological_data;
    for (const yr in raw) {
      for (const mo in raw[yr]) {
        raw[yr][mo].forEach(e => {
          const [d,m,y] = e.date.split("/");
          let jsDate = new Date(+y, m-1, +d);
          ALL_ENTRIES.push({
            ...e,
            jsDate,
            y: +y,
            m: m-1,
            d: +d
          });
        });
      }
    }
    renderCalendar();
  });

// STATE
let currentYear = 1942;
let currentMonth = 5; // June
const monthLabel = document.getElementById("monthLabel");
const entryPanel = document.getElementById("entryContent");
const calendarGrid = document.getElementById("calendarGrid");

// RENDER CALENDAR
function renderCalendar() {
  const date = new Date(currentYear, currentMonth, 1);
  const monthName = date.toLocaleString("default", {month:"long"});
  monthLabel.textContent = `${monthName} ${currentYear}`;

  calendarGrid.innerHTML = "";

  const firstDay = date.getDay();
  const days = new Date(currentYear, currentMonth+1, 0).getDate();

  for (let i=0; i<firstDay; i++) {
    calendarGrid.appendChild(document.createElement("div"));
  }

  for (let day=1; day<=days; day++) {
    const tile = document.createElement("div");
    tile.className = "day";
    tile.textContent = day;

    const thisDate = new Date(currentYear, currentMonth, day);
    const entry = ALL_ENTRIES.find(x => x.jsDate.toDateString() === thisDate.toDateString());

    if (entry) {
      tile.classList.add("has-entry");
      if (entry.milestone && entry.milestone.toLowerCase().includes("yes")) {
        const dot = document.createElement("div");
        dot.className = "milestone-dot";
        tile.appendChild(dot);
      }
      tile.onclick = () => showEntry(entry);
    } else {
      tile.onclick = () => entryPanel.innerHTML = "<em>No entry for this day.</em>";
    }

    calendarGrid.appendChild(tile);
  }
}

// SHOW ENTRY
function showEntry(e) {
  entryPanel.innerHTML = `
    <div style="font-size:1.05rem;font-weight:600;margin:8px 0;">
      ${e.day_of_week} â€” ${e.date}
    </div>

    <div style="margin:6px 0;"><strong>Theme:</strong> ${e.theme}</div>
    <div style="margin:6px 0;"><strong>Milestone:</strong> ${e.milestone}</div>
    <div style="margin-top:10px;">${e.text}</div>
  `;
}

// MONTH BUTTONS
prevMonth.onclick = () => {
  currentMonth--;
  if (currentMonth < 0) { currentMonth = 11; currentYear--; }
  renderCalendar();
};

nextMonth.onclick = () => {
  currentMonth++;
  if (currentMonth > 11) { currentMonth = 0; currentYear++; }
  renderCalendar();
};
</script>

</body>
</html>
